<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Array.prototype.reduce()</title>
  </head>
  <body>
    <h1>Array.prototype.reduce()</h1>
    <h3>
      The reduce() method executes a reducer function (that you provide) on each element of the array, resulting in a
      single output value.
    </h3>
    <script>
      var array1 = [1, 2, 3, 4, 1];
      var sum = array1.reduce((a, c) => a + c);
      console.log(sum + ' ->sum');

      var avg = array1.reduce((a, c) => a + c) / array1.length;
      console.log(avg + ' ->avg');

      var biggest = array1.reduce((a, c) => (c > a ? c : a));
      console.log(biggest + ' ->biggest');
      var max = array1.reduce((a, c) => Math.max(a, c));
      console.log(max + ' ->max');

      var smallest = array1.reduce((a, c) => (c < a ? c : a));
      console.log(smallest + ' ->smallest');
      var min = array1.reduce((a, c, x) => Math.min(a, c));
      console.log(min + ' ->min');

      var squarePush = array1.reduce((a, c) => {
        a.push(c ** 2);
        return a;
      }, []);
      console.log('Push:');
      console.log(squarePush);

      var squareConcat = array1.reduce((a, c) => a.concat(c ** 2), []);
      console.log('concat:');
      console.log(squareConcat);

      var flattened = [[1, 2], ['hi', 4], 0, [5, 6]].reduce((acc, c) => acc.concat(c), []);
      console.log('flattened:');
      console.log(flattened);

      var removeDuplicate = array1.reduce(function(acc, current) {
        //The indexOf() method returns the first index at which a given element can be found in the array, or -1 if it is not present.
        if (acc.indexOf(current) === -1) {
          acc.push(current);
        }

        return acc;
      }, []);
      console.log('removeDuplicate:');
      console.log(removeDuplicate);

      /////objects

      var sumObjects = [{ x: 1 }, { x: 2 }, { x: 3 }].reduce((a, current) => (a += current.x), 0);
      console.log('sumObjects:');
      console.log(sumObjects);

      var names = ['Gandalf', 'Legalos', 'Kratos', 'Gandalf', 'Kratos', 'Sauron'];
      var countNames = names.reduce(function(allNames, name) {
        if (name in allNames) {
          allNames[name]++;
        } else {
          allNames[name] = 1;
        }
        return allNames;
      }, {});
      console.log('countNames:');
      console.log(countNames);

      var friends = [
        {
          name: 'Anna',
          books: ['The Way of The Kings', 'Harry Potter'],
          age: 21
        },
        {
          name: 'Bob',
          books: ['War and peace', 'Romeo and Juliet'],
          age: 26
        },
        {
          name: 'Alice',
          books: ['The Lord of the Rings', 'The Shining'],
          age: 18
        }
      ];
      var allBooks = friends.reduce(function(acc, current) {
        return [...acc, ...current.books];
      }, []);
      console.log('allBooks:');
      console.log(allBooks);

      //Grouping objects by a property
      function groupBy(OjbectArray, property) {
        return OjbectArray.reduce(function(acc, currentObj) {
          var key = currentObj[property];
          if (!acc[key]) {
            acc[key] = [];
          }
          acc[key].push(currentObj);
          return acc;
        }, {});
      }
      var groupedFriend = groupBy(friends, 'age');
      console.log('groupedFriend:');
      console.log(groupedFriend);

      ////////////////////// Web Dev Simplified ////////////////
      const webItems = [
        { name: 'Bike', price: 100 },
        { name: 'TV', price: 200 },
        { name: 'Album', price: 10 },
        { name: 'Book', price: 5 },
        { name: 'Phone', price: 500 },
        { name: 'Computer', price: 1000 },
        { name: 'Keyboard', price: 25 }
      ];
      const total = webItems.reduce((acc, curent) => {
        acc = acc + curent.price
        return acc;
      }, 0);
      console.log(total);
    </script>
  </body>
</html>
